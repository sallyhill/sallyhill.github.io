<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Sally Hill — Artist</title>
		<meta name="description" content="Art, music, code by Sally Hill" />
		<style>
			:root {
				--bg: #ffffff;
				--fg: #1d1028;
				--muted: #6a5d7a;
				--accent: #8b5cf6; /* purple accent */
				/* Lavender card tones */
				--card-1: #f3e8ff;  /* lavender 100 */
				--card-2: #ede9fe;  /* indigo 100 */
				--card-3: #e9d5ff;  /* purple 200 */
			}
			* { box-sizing: border-box; }
			html, body { margin: 0; padding: 0; color: var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
			/* Custom cursor */
			body { cursor: url('assets/nat1056.cur'), auto; }
			/* Apply tiled background to both html and body to ensure visibility */
			html, body { background-image: url('assets/firering.jpg'); background-repeat: repeat; background-size: 128px 128px; }
			/* Ensure the background shows by giving body a minimum height and prevent horizontal overflow */
			body { min-height: 100vh; overflow-x: hidden; }
			a { color: var(--accent); text-decoration: none; }
			a:hover { text-decoration: underline; }

			.container { max-width: 960px; margin: 0 auto; padding: 24px; }

			header {
				display: grid;
				gap: 16px;
				align-items: end;
				margin-bottom: 24px;
			}
			div.hero {
				width: 100%;
				aspect-ratio: 16/9;
				border-radius: 12px;
				background: center / cover no-repeat url('assets/sally.png');
			}
			/* If you use <img class="hero"> instead of a background div */
			img.hero { display: block; max-width: 100%; width: 100%; height: auto; border-radius: 12px; object-fit: cover; }
			.title { font-size: 2rem; font-weight: 700; letter-spacing: 0.5px; }
			.subtitle { color: var(--muted); font-size: 1rem; }

			/* About layout */
			.about-content { display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: start; }
			.about-image { width: 160px; height: auto; border-radius: 12px; object-fit: cover; }

				/* Section cards use purplem1.jpg background image with subtle lavender overlay */
				.card { 
					background: var(--card-1);
					border: none; border-radius: 12px; padding: 16px;
					background-image: 
						linear-gradient(rgba(243, 232, 255, 0.6), rgba(243, 232, 255, 0.6)),
						url('assets/purplem1.jpg');
					background-size: cover;
					background-repeat: no-repeat;
					background-position: center;
				}
				.card.alt { 
					background: var(--card-2);
					background-image: 
						linear-gradient(rgba(237, 233, 254, 0.6), rgba(237, 233, 254, 0.6)),
						url('assets/purplem1.jpg');
					background-size: cover;
					background-repeat: no-repeat;
					background-position: center;
				}
				.card.subtle { 
					background: var(--card-3);
					background-image: 
						linear-gradient(rgba(233, 213, 255, 0.6), rgba(233, 213, 255, 0.6)),
						url('assets/purplem1.jpg');
					background-size: cover;
					background-repeat: no-repeat;
					background-position: center;
				}

			.work {
				margin: 24px 0;
				display: grid;
				gap: 16px;
			}
			.block-image {
				width: 100%;
			}
			/* If you use <img class="block-image"> instead of a background div */
			img.block-image { display: block; max-width: 100%; width: 100%; height: auto; border-radius: 12px; object-fit: cover; }

			.embeds { display: grid; gap: 24px; margin-top: 24px; }

			.embed { background: transparent; border: none; border-radius: 12px; overflow: hidden; }
			.embed header { padding: 10px 12px; border-bottom: none; color: var(--muted); }
			.embed header h2 { margin: 0; font-size: 1rem; }
			.embed .frame { position: relative; width: 100%; }
			.embed .frame.r16x9 { aspect-ratio: 16/9; }
			.embed .frame.r1x1  { aspect-ratio: 1 / 1; }
			.embed .frame iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

			/* Performance Video Grid */
			.video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; }
			.v-square { position: relative; padding-top: 100%; border-radius: 12px; overflow: hidden; cursor: pointer; background: var(--card-2); }
			.v-square .inner { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; }
			.v-square .label { color: #261142; font-weight: 700; letter-spacing: 0.3px; text-transform: uppercase; }
			.v-square:hover { transform: translateY(-2px); transition: transform 160ms ease; }
			#video-embed { overflow: hidden; height: 0; opacity: 0; transition: height 240ms ease, opacity 240ms ease; }
			#video-embed.open { opacity: 1; }
			#video-controls { display: none; justify-content: flex-end; gap: 8px; margin-top: 8px; }
			#video-controls.open { display: flex; }
			.button { background: #ede9fe; color: #1d1028; border: none; border-radius: 8px; padding: 6px 10px; cursor: pointer; font-weight: 600; }
			.button:hover { background: #e9d5ff; }

			/* Audio Grid */
			.audio-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; }
			.square { position: relative; padding-top: 100%; border-radius: 12px; overflow: hidden; cursor: pointer; }
			.square .inner { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; }
			.square .label { color: #261142; font-weight: 700; letter-spacing: 0.3px; text-transform: uppercase; }
			.square.audio-open { cursor: default; }
			.square audio { width: 100%; height: 100%; }
			.square .audio-wrap { position: absolute; inset: 10px; border-radius: 8px; background: #ede9fecc; display: flex; align-items: center; justify-content: center; }
			/* Retro feel for audio controls */
			.square audio { filter: none; }

			/* Tumblr grid: small image tiles, no text */
			#tumblr-feed { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); }
			#tumblr-feed .card { padding: 0; background: transparent; border-radius: 10px; overflow: hidden; }
			#tumblr-feed a { display: block; }
			#tumblr-feed img { display: block; width: 100%; height: auto; aspect-ratio: 1/1; object-fit: cover; }

			footer { color: var(--muted); font-size: 0.9rem; margin: 32px 0 16px; text-align: center; }

			@media (max-width: 640px) {
				.title { font-size: 1.6rem; }
				.about-content { grid-template-columns: 1fr; }
				.about-image { width: 100%; }
			}
		</style>
	</head>
	<body>
		<div class="container">
			<header>
				<img src="assets/sally.png" alt="Artist header image" class="hero" />
				<div>
					<div class="title">Sally Hill</div>
					<div class="subtitle">Visual Art / Music / Code</div>
				</div>
			</header>

			<section class="card" aria-labelledby="about-title">
				<h2 id="about-title" style="margin-top:0">About</h2>
					<div class="about-content">
						<div>
							<p>
								I'm a visual artist by training, but I'm a coder by trade.<br/>
								I got my start in code with Myspace layouts. These days, I spend an obscene amount of time talking to AI at work.<br/>
								Outside of work, I've been learning music production for a few years. Before, that, I was making rough demos.<br/>
								Sometimes I paint. I write poetry. In the past, I made installation sculptures and did performance art.
							</p>
							<p>
								I love to learn about:
								<ul>
									<li>Audio Synthesis</li>
									<li>Tarot</li>
									<li>Somatic practices</li>
									<li>The basic electrical components that make up synths</li>
									<li>Generative video and audio</li>
								</ul>
							</p>
						</div>
						<img src="assets/noddles.jpg" alt="studio noddles" class="about-image" />
					</div>
			</section>

			<section class="work" aria-labelledby="work-title">
				<img src="assets/work.png" alt="work artwork" class="block-image" />
			</section>

			<section class="embeds">
				<!-- Tumblr Integration -->
				<div class="embed" aria-labelledby="tumblr-title">
					<header><h2 id="tumblr-title">Tumblr</h2></header>
					<div class="card" style="border:none; border-radius:0; padding: 0;">
						<div id="tumblr-feed" aria-live="polite" style="display:grid; gap:16px; padding:16px;"></div>
					</div>
				</div>

				<!-- S3 Audio Squares -->
				<div class="embed" aria-labelledby="audio-title">
					<header><h2 id="audio-title">Audio</h2></header>
					<div class="card" style="border: none; border-radius: 0; padding: 16px;">
						<div class="audio-grid" id="audio-grid" aria-label="Audio tracks grid"></div>
						<p class="subtitle" style="margin-top:12px">Click a square to play.</p>
					</div>
				</div>

				<!-- Performance Videos Section -->
				<div class="embed" aria-labelledby="videos-title">
					<header><h2 id="videos-title">Performance Videos</h2></header>
					<img src="assets/more.png" alt="More performances" class="block-image" />
					<div class="card" style="border: none; border-radius: 0; padding: 16px;">
						<div class="video-grid" id="video-grid" aria-label="Performance videos grid"></div>
						<div id="video-embed" class="frame r16x9" style="margin-top: 12px; overflow: hidden; height: 0; opacity: 0; transition: height 240ms ease, opacity 240ms ease;"></div>
						<div id="video-controls" aria-label="Video controls"><button id="close-video" class="button" type="button">Close video</button></div>
						<p class="subtitle" style="margin-top:12px">Click a square to open the video below.</p>
					</div>
				</div>
			</section>

      

			<footer>
				© <span id="y"></span> Sally Hill used chat gpt 5. All rights reserved.
			</footer>
		</div>

		<script>
						// ============ Tumblr API ============
						// Simple client-side configuration (no URL/localStorage logic)
						const TUMBLR_API_KEY = 'Cm6yXG6e1jEFTxDiJGON4jYpW2cA1c0XXXxxUMIaGkIzlsHHvc';
						const TUMBLR_BLOG_HOSTNAME = 'sallyhill.tumblr.com'; // e.g., 'yourblog.tumblr.com'
						const TUMBLR_LIMIT = 12; // number of posts to show (bumped for better coverage)

						async function fetchTumblrPosts() {
							const feed = document.getElementById('tumblr-feed');
							if (!feed) return;
							feed.innerHTML = '<div class="subtitle">Loading Tumblr posts…</div>';

							if (!TUMBLR_API_KEY) {
								feed.innerHTML = '<div class="subtitle">Add your Tumblr API key to show posts.</div>';
								return;
							}



							try {
								const url = `https://api.tumblr.com/v2/blog/${encodeURIComponent(TUMBLR_BLOG_HOSTNAME)}/posts?api_key=${encodeURIComponent(TUMBLR_API_KEY)}&limit=${TUMBLR_LIMIT}`;
								const res = await fetch(url, { mode: 'cors' });
								if (!res.ok) throw new Error('Tumblr API error');
								const data = await res.json();
								const posts = (data.response && data.response.posts) || [];

								if (!posts.length) {
									feed.innerHTML = '<div class="subtitle">No posts found.</div>';
									return;
								}

								feed.innerHTML = '';
								let rendered = 0;
								console.log('[Tumblr] Posts fetched:', posts.length);
								posts.forEach(p => {
									// Extract an image from multiple possible shapes in the Tumblr API.
									let imageUrl = '';
									// 1) Classic photos array
									if (Array.isArray(p.photos) && p.photos.length) {
										const ph = p.photos[0];
										imageUrl = (ph.original_size && ph.original_size.url) || (ph.alt_sizes && ph.alt_sizes[0]?.url) || '';
									}
									// 2) Thumbnail
									if (!imageUrl && p.thumbnail_url) {
										imageUrl = p.thumbnail_url;
									}
									// Utility: find first <img src="..."> in an HTML string
									const findImgInHtml = (html) => {
										if (!html || typeof html !== 'string') return '';
										const m = html.match(/<img[^>]*src="([^"]+)"/i);
										return m ? m[1] : '';
									};
									// 3) Trail HTML (content or content_raw contains <img> tags)
									if (!imageUrl && Array.isArray(p.trail)) {
										for (const t of p.trail) {
											// Some responses include HTML in t.content (string) or t.content_raw
											const htmlCandidate = typeof t.content === 'string' ? t.content : (t.content_raw || '');
											const found = findImgInHtml(htmlCandidate);
											if (found) { imageUrl = found; break; }
										}
									}
									// 4) Body HTML (for text posts with images in NPF markup)
									if (!imageUrl && p.body) {
										imageUrl = findImgInHtml(p.body);
									}

									if (!imageUrl) return; // skip if no image found

									const card = document.createElement('article');
									card.className = 'card';
									const a = document.createElement('a');
									a.href = p.post_url || `https://${TUMBLR_BLOG_HOSTNAME}/post/${p.id}`;
									a.target = '_blank';
									a.rel = 'noopener noreferrer';
									const img = document.createElement('img');
									img.src = imageUrl;
									img.alt = 'Tumblr post';
									a.appendChild(img);
									card.appendChild(a);
									feed.appendChild(card);
									rendered++;
								});

								if (!rendered) {
									feed.innerHTML = '<div class="subtitle">No tiles available from Tumblr posts.</div>';
								} else {
									console.log('[Tumblr] Tiles rendered:', rendered);
								}
							} catch (err) {
								console.error('Tumblr fetch failed', err);
								feed.innerHTML = '<div class="subtitle">Unable to load Tumblr posts. Check API key or CORS.</div>';
							}
						}

						document.addEventListener('DOMContentLoaded', () => {
							renderAudioGrid();
							fetchTumblrPosts();
						});
			// Set current year in footer
			document.getElementById('y').textContent = new Date().getFullYear();

			// Configure your S3 MP3 links here
			const s3Links = [
        'https://fawm2025.s3.ca-central-1.amazonaws.com/154_less.mp3',
        'https://fawm2025.s3.ca-central-1.amazonaws.com/timebox_switch_bpm.mp3',
				'https://fawm2025.s3.ca-central-1.amazonaws.com/aconite.mp3'
			];

			// Generate a pleasant lavender/purple tone
			function randomLavenderTone() {
				// H from 260..290 (purple range), S from 35..65, L from 70..90 for soft cards
				const h = 260 + Math.random() * 30;
				const s = 35 + Math.random() * 30;
				const l = 70 + Math.random() * 20;
				return `hsl(${h.toFixed(0)} ${s.toFixed(0)}% ${l.toFixed(0)}%)`;
			}

			// Render audio squares
			function renderAudioGrid() {
				const grid = document.getElementById('audio-grid');
				grid.innerHTML = '';
				s3Links.forEach((url, idx) => {
					const square = document.createElement('div');
					square.className = 'square';
					square.style.background = randomLavenderTone();

					const inner = document.createElement('div');
					inner.className = 'inner';

					const label = document.createElement('div');
					label.className = 'label';
					// Use filename (without extension) as the label text
					const filename = url.split('/').pop() || '';
					label.textContent = filename.replace(/\.[^/.]+$/, '');
					inner.appendChild(label);
					square.appendChild(inner);

					square.addEventListener('click', () => {
						if (square.classList.contains('audio-open')) return;
						// Pause any other playing audio and close other squares
						document.querySelectorAll('.square.audio-open audio').forEach(a => { a.pause(); });
						document.querySelectorAll('.square.audio-open').forEach(s => { s.classList.remove('audio-open'); s.innerHTML = ''; });

						square.classList.add('audio-open');
						inner.remove();

						const wrap = document.createElement('div');
						wrap.className = 'audio-wrap';

						const audio = document.createElement('audio');
						audio.src = url;
						audio.controls = true;
						audio.controlsList = 'nodownload'; // disable save/download in supported browsers
						audio.preload = 'none';

						// Optional: further discourage saving via context menu
						audio.addEventListener('contextmenu', (e) => e.preventDefault());

						// Ensure only one track plays at a time
						audio.addEventListener('play', () => {
							document.querySelectorAll('.square audio').forEach(other => {
								if (other !== audio) other.pause();
							});
						});

						wrap.appendChild(audio);
						square.appendChild(wrap);
						audio.play().catch(() => { /* autoplay may be blocked; user can press play */ });
					});

					grid.appendChild(square);
				});
			}

			// Configure your YouTube performance links here
			const performanceLinks = [
				'https://youtu.be/RKyeNk_rl8U',
				'https://youtu.be/bCYxJ8YOZxo',
        'https://youtu.be/s03HJxvLNkM'
			];

			function youtubeIdFromUrl(url) {
				try {
					const u = new URL(url);
					if (u.hostname.includes('youtu.be')) {
						return u.pathname.slice(1);
					}
					if (u.hostname.includes('youtube.com')) {
						if (u.pathname.startsWith('/watch')) {
							return u.searchParams.get('v') || '';
						}
						// e.g., /embed/ID or /shorts/ID
						const parts = u.pathname.split('/').filter(Boolean);
						return parts.includes('embed') || parts.includes('shorts') ? parts.pop() : '';
					}
				} catch { /* ignore */ }
				return '';
			}

			function renderVideoGrid() {
				const grid = document.getElementById('video-grid');
				const embed = document.getElementById('video-embed');
				if (!grid || !embed) return;
				grid.innerHTML = '';
				embed.innerHTML = '';

				performanceLinks.forEach((url) => {
					const id = youtubeIdFromUrl(url);
					const square = document.createElement('div');
					square.className = 'v-square';
					// Use random lavender tone per video square
					square.style.background = randomLavenderTone();

					const inner = document.createElement('div');
					inner.className = 'inner';

					const label = document.createElement('div');
					label.className = 'label';
					label.textContent = id ? `Video ${id.slice(0, 6)}` : 'Video';
					inner.appendChild(label);
					square.appendChild(inner);

					square.addEventListener('click', () => {
						if (!id) return;
						// Smoothly open the player space if currently collapsed
						if (embed.style.height === '0px' || embed.style.height === '0' || embed.style.height === '') {
							const w = embed.clientWidth || embed.getBoundingClientRect().width;
							const targetH = Math.round((9/16) * w);
							embed.style.height = `${targetH}px`;
							embed.style.opacity = '1';
						}
						// Use youtube-nocookie and set a referrer policy to avoid configuration errors
						embed.innerHTML = `<iframe src=\"https://www.youtube-nocookie.com/embed/${id}\" title=\"YouTube video\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>`;
								// Show controls after opening
								const controls = document.getElementById('video-controls');
								if (controls) controls.classList.add('open');
					});

					grid.appendChild(square);
				});
			}

			document.addEventListener('DOMContentLoaded', () => {
				renderVideoGrid();
				const embed = document.getElementById('video-embed');
				const controls = document.getElementById('video-controls');
				const closeBtn = document.getElementById('close-video');
				if (closeBtn) {
					closeBtn.addEventListener('click', () => {
						// Collapse player and clear iframe
						embed.style.height = '0px';
						embed.style.opacity = '0';
						embed.innerHTML = '';
						controls.classList.remove('open');
					});
				}
			});

			document.addEventListener('DOMContentLoaded', renderAudioGrid);
		</script>
	</body>
</html>

